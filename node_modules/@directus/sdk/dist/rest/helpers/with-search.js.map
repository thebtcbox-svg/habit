{"version":3,"file":"with-search.js","names":[],"sources":["../../../src/rest/helpers/with-search.ts"],"sourcesContent":["import { formatFields } from '../index.js';\nimport type { RestCommand } from '../types.js';\n\nexport function withSearch<Schema, Output>(getOptions: RestCommand<Output, Schema>): RestCommand<Output, Schema> {\n\treturn () => {\n\t\tconst options = getOptions();\n\n\t\tif (options.method === 'GET' && options.params) {\n\t\t\toptions.method = 'SEARCH';\n\n\t\t\toptions.body = JSON.stringify({\n\t\t\t\tquery: {\n\t\t\t\t\t...options.params,\n\t\t\t\t\tfields: formatFields(options.params['fields'] ?? []),\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tdelete options.params;\n\t\t}\n\n\t\treturn options;\n\t};\n}\n"],"mappings":"+EAGA,SAAgB,EAA2B,EAAsE,CAChH,UAAa,CACZ,IAAM,EAAU,GAAY,CAe5B,OAbI,EAAQ,SAAW,OAAS,EAAQ,SACvC,EAAQ,OAAS,SAEjB,EAAQ,KAAO,KAAK,UAAU,CAC7B,MAAO,CACN,GAAG,EAAQ,OACX,OAAQ,EAAa,EAAQ,OAAO,QAAa,EAAE,CAAC,CACpD,CACD,CAAC,CAEF,OAAO,EAAQ,QAGT"}